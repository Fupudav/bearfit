<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>BearFit Challenge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220" />
  <link rel="manifest" href="./manifest.json" />
  <!-- On ajoutera le CSS plus tard -->
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div id="app">

    <!-- HEADER -->
    <header class="app-header">
      <h1 id="app-title">BearFit Challenge</h1>
      <div id="header-xp">
        XP total : <span id="header-xp-value">0</span>
      </div>
    </header>

    <!-- CONTENU PRINCIPAL -->
    <main id="screen-container">

      <!-- Écran Accueil -->
      <section id="home" class="screen active">
        <h2>Accueil</h2>
        <p>Strike global : <span id="home-streak">0</span> jours</p>
        <p>Objectif XP du jour : <span id="home-daily-target">40</span></p>
        <p>XP aujourd'hui : <span id="home-today-xp">0</span></p>

        <div>
          <h3>Objectif du jour</h3>
          <p id="home-main-objective">–</p>
          <div>
            <p id="home-secondary-objective">–</p>
            <button id="home-reroll-secondary" type="button">Reroll (1)</button>
          </div>
        </div>

        <button id="btn-combined-session">Séance combinée</button>
      </section>

      <!-- Écran Challenges -->
      <section id="challenges" class="screen">
        <h2>Challenges</h2>
        <div id="challenge-list">
          <!-- Les tuiles de challenge seront générées en JS -->
        </div>
      </section>

      <!-- Écran Stats -->
      <section id="stats" class="screen">
        <h2>Stats</h2>

        <div class="card">
          <p>XP total : <span id="stats-xp">0</span></p>
          <p>Strike global : <span id="stats-streak">0</span> jours</p>
        </div>

        <div class="card">
          <h3>Pompes</h3>
          <p>Total : <span id="stats-total-pompes">0</span></p>
          <p>Record séance : <span id="stats-max-pompes">0</span></p>
        </div>

        <div class="card">
          <h3>Gainage</h3>
          <p>Total : <span id="stats-total-gainage">0</span> s</p>
          <p>Record séance : <span id="stats-max-gainage">0</span> s</p>
        </div>

        <div class="card">
          <h3>Abdos</h3>
          <p>Total : <span id="stats-total-abdos">0</span></p>
          <p>Record séance : <span id="stats-max-abdos">0</span></p>
        </div>

        <div class="card">
          <h3>Triceps haltères</h3>
          <p>Total : <span id="stats-total-triceps">0</span></p>
          <p>Record séance : <span id="stats-max-triceps">0</span></p>
          <p>Record poids total : <span id="stats-max-triceps-weight">0</span> kg</p>
          <p>Poids actuel : <span id="stats-weight-triceps">–</span></p>
        </div>

        <div class="card">
          <h3>Développé couché</h3>
          <p>Total : <span id="stats-total-developpe">0</span></p>
          <p>Record séance : <span id="stats-max-developpe">0</span></p>
          <p>Record poids total : <span id="stats-max-developpe-weight">0</span> kg</p>
          <p>Poids actuel : <span id="stats-weight-developpe">–</span></p>
        </div>
      </section>

      <!-- Écran Ligues -->
      <section id="leagues" class="screen">
        <h2>Ligues</h2>

        <div class="card">
          <h3>Ligue actuelle</h3>
          <p id="league-current-name">–</p>
          <p id="league-current-desc">–</p>
          <p>XP cette semaine : <span id="league-week-xp">0</span></p>
          <p>Meilleure ligue : <span id="league-best">1</span></p>
          <p>Fin dans : <span id="league-time-remaining">–</span></p>
        </div>

        <div class="card">
          <h3>Classement hebdo</h3>
          <ol id="league-leaderboard" class="leaderboard"></ol>
        </div>

        <div id="league-last-result" class="card hidden">
          <h3>Résultat semaine précédente</h3>
          <p id="league-last-status">–</p>
          <p id="league-last-rank">–</p>
          <p id="league-last-xp">–</p>
        </div>
      </section>

      <!-- Écran Séance libre -->
      <section id="free" class="screen">
        <h2>Séance libre</h2>
        <div>
          <label for="free-exercise">Exercice :</label>
          <select id="free-exercise">
            <option value="pushups">Pompes</option>
            <option value="plank">Gainage</option>
            <option value="abs">Abdos</option>
            <option value="triceps">Triceps haltères</option>
            <option value="bench">Développé couché</option>
          </select>
        </div>
        <div>
          <label for="free-type">Type :</label>
          <select id="free-type">
            <option value="reps">Répétitions</option>
            <option value="time">Temps (secondes)</option>
          </select>
        </div>
        <div>
          <label for="free-value">Valeur :</label>
          <input type="number" id="free-value" min="1" />
        </div>
        <p id="free-weight-row">Poids recommandé : <span id="free-weight"></span></p>
        <button id="btn-free-start">Démarrer la séance libre</button>
        <p id="free-result"></p>
      </section>

      <!-- Écran Succès -->
      <section id="success" class="screen">
        <h2>Succès</h2>
        <div id="success-list">
          <!-- Liste de succès, on remplira plus tard -->
        </div>
      </section>

      <!-- Écran Séance (affiche une séance de challenge) -->
      <section id="session" class="screen">
        <h2 id="session-title">Séance</h2>

        <p id="session-subtitle"></p>

        <p>Durée séance : <span id="session-global-timer">00:00</span></p>

        <div id="session-step">
          <!-- On affichera ici la série actuelle : ex. "Série 1 : 7 pompes" -->
        </div>

        <div id="session-countdown"></div>
        <div id="session-work-timer"></div>
        <div id="session-rest"></div>
        <button id="session-skip-rest-btn" class="secondary">Passer le repos</button>

        <button id="session-complete-btn">
          Série terminée
        </button>

        <div id="session-free-actions" class="session-free-actions">
          <button id="session-free-add" class="secondary">Ajouter une série</button>
          <button id="session-free-end">Terminer la séance</button>
        </div>

        <p id="session-progress-text">
          <!-- Ex : "Série 1 sur 3" -->
        </p>

        <p id="session-next-step"></p>

        <p id="session-xp-preview">
          <!-- Ex : "XP prévu : 20" -->
        </p>

        <div id="session-recap" class="recap hidden">
          <h3 id="session-recap-title">Récap séance</h3>
          <p>Durée totale : <span id="session-recap-duration">00:00</span></p>
          <p>XP gagnés : <span id="session-recap-xp">0 XP</span></p>
          <p id="session-recap-progress"></p>
          <ul id="session-recap-records"></ul>
          <button id="session-recap-home-btn">Retour à l’accueil</button>
        </div>
      </section>

      <!-- Écran Réglages -->
      <section id="settings" class="screen">
        <h2>Réglages</h2>
        <div class="settings-section">
          <h3>Objectif XP quotidien</h3>
          <input type="number" id="settings-daily-xp" min="0" />
        </div>

        <div class="settings-section">
          <h3>Jours off par semaine</h3>
          <select id="settings-weekly-offdays">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>

        <div class="settings-section">
          <h3>Challenges actifs</h3>
          <label class="toggle-row">
            <span>Pompes</span>
            <input type="checkbox" data-challenge-toggle="pushups" />
          </label>
          <label class="toggle-row">
            <span>Gainage</span>
            <input type="checkbox" data-challenge-toggle="plank" />
          </label>
          <label class="toggle-row">
            <span>Abdos</span>
            <input type="checkbox" data-challenge-toggle="abs" />
          </label>
          <label class="toggle-row">
            <span>Triceps</span>
            <input type="checkbox" data-challenge-toggle="triceps" />
          </label>
          <label class="toggle-row">
            <span>Développé</span>
            <input type="checkbox" data-challenge-toggle="bench" />
          </label>
        </div>

        <div class="settings-section">
          <h3>Thème</h3>
          <div class="segmented-control">
            <label>
              <input type="radio" name="theme" data-theme-option="light" />
              <span>Clair</span>
            </label>
            <label>
              <input type="radio" name="theme" data-theme-option="dark" />
              <span>Sombre</span>
            </label>
            <label>
              <input type="radio" name="theme" data-theme-option="auto" />
              <span>Auto</span>
            </label>
          </div>
        </div>

        <div class="settings-section">
          <h3>Sons & vibrations</h3>
          <label class="toggle-row">
            <span>Sons</span>
            <input type="checkbox" id="settings-sound-enabled" />
          </label>
          <label class="toggle-row">
            <span>Vibrations</span>
            <input type="checkbox" id="settings-vibration-enabled" />
          </label>
        </div>

        <div class="settings-section">
          <h3>Rappels</h3>
          <label class="toggle-row">
            <span>Activer les rappels</span>
            <input type="checkbox" id="settings-reminders-enabled" />
          </label>
          <label for="settings-reminder-daily-time">Rappel quotidien</label>
          <input type="time" id="settings-reminder-daily-time" />
          <label for="settings-reminder-xp-time">Rappel objectif XP</label>
          <input type="time" id="settings-reminder-xp-time" />
        </div>

        <div class="settings-section">
          <h3>Temps de repos</h3>
          <div class="settings-item">
            <label for="settings-rest-pushups">Récup Pompes</label>
            <input type="range" id="settings-rest-pushups" min="10" max="180" step="5" />
            <span id="settings-rest-pushups-value">30s</span>
          </div>
          <div class="settings-item">
            <label for="settings-rest-plank">Récup Gainage</label>
            <input type="range" id="settings-rest-plank" min="10" max="180" step="5" />
            <span id="settings-rest-plank-value">30s</span>
          </div>
          <div class="settings-item">
            <label for="settings-rest-abs">Récup Abdos</label>
            <input type="range" id="settings-rest-abs" min="10" max="180" step="5" />
            <span id="settings-rest-abs-value">30s</span>
          </div>
          <div class="settings-item">
            <label for="settings-rest-triceps">Récup Triceps</label>
            <input type="range" id="settings-rest-triceps" min="10" max="180" step="5" />
            <span id="settings-rest-triceps-value">45s</span>
          </div>
          <div class="settings-item">
            <label for="settings-rest-bench">Récup Développé</label>
            <input type="range" id="settings-rest-bench" min="10" max="180" step="5" />
            <span id="settings-rest-bench-value">60s</span>
          </div>
        </div>
      </section>

      <!-- Écran Profil -->
      <section id="profile" class="screen">
        <h2>Profil</h2>
        <p>Pseudo : <span id="profile-name"></span></p>
        <p>Ligue : <span id="profile-league"></span></p>
        <p>XP total : <span id="profile-xp"></span></p>
        <button id="profile-reset-btn" class="secondary">
          Réinitialiser le profil
        </button>
      </section>

    </main>

    <div id="combined-modal" class="modal hidden">
      <div class="modal-content">
        <h3>Choisir les challenges</h3>
        <div id="combined-list"></div>
        <div class="modal-actions">
          <button id="combined-start-btn">Lancer la séance</button>
          <button id="combined-cancel-btn" class="secondary">Annuler</button>
        </div>
      </div>
    </div>

    <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

    <!-- NAVIGATION BASSE -->
    <nav class="bottom-nav">
      <button data-screen="home" class="nav-btn active">Accueil</button>
      <button data-screen="challenges" class="nav-btn">Challenges</button>
      <button data-screen="stats" class="nav-btn">Stats</button>
      <button data-screen="leagues" class="nav-btn">Ligues</button>
      <button data-screen="free" class="nav-btn">Séance libre</button>
      <button data-screen="settings" class="nav-btn">Réglages</button>
      <button data-screen="success" class="nav-btn">Succès</button>
      <button data-screen="profile" class="nav-btn">Profil</button>
    </nav>
  </div>

  <!-- On ajoutera les scripts JS plus tard -->
  <script src="./js/achievements_def.js"></script>
  <script src="./storage.js"></script>
  <script src="./data_challenges.js"></script>
  <script src="./challenges_ui.js"></script>
  <script src="./navigation.js"></script>
  <script src="./ui.js"></script>
  <script src="./stats_ui.js"></script>
  <script src="./league_ui.js"></script>
  <script src="./success_ui.js"></script>
  <script src="./combined_ui.js"></script>
  <script src="./session_ui.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./service-worker.js");
      });
    }
  </script>
</body>

</html>


